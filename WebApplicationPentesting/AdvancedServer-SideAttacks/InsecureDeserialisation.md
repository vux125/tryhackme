# Some important concepts

- ***Serialisation***: nó như một quy trình để chuyển đổ dữ liệu con người có thể đọc được thành nhị phân có thẻ được lưu trữ khi cần.

- ***Deserialisation***: nó ngược lại vói serialisation, nó lấy dữ liệu đượ đống gói và biến nó thành thứ mình có thể sử dụng.

## PHP Serialiastion

- Trong PHP , tuần tự hóa được thực hiện bằng hàm serialize(). Hàm này chuyển đổi một đối tượng hoặc mảng PHP thành một luồng byte biểu diễn dữ liệu và cấu trúc của đối tượng. Luồng byte kết quả có thể bao gồm nhiều kiểu dữ liệu khác nhau, chẳng hạn như chuỗi, mảng và đối tượng, khiến nó trở nên duy nhất.

- PHP cung cấp một số magic method đóng vai trò quan trọng trong quá trình tuần tự hóa. Một số phương thức quan trọng được đề cập dưới đây:

  - `__sleep()`: Phương pháp này được gọi trên một đối tượng trước khi tuần tự hóa. Nó có thể dọn dẹp các tài nguyên, chẳng hạn như kết nối cơ sở dữ liệu và dự kiến ​​sẽ trả về một mảng các tên thuộc tính cần được tuần tự hóa.
 
  - `__wakeup()`: Phương pháp này được gọi khi hủy tuần tự hóa. Nó có thể thiết lập lại bất kỳ kết nối nào mà đối tượng có thể cần để hoạt động chính xác.
 
  - `__serialisation`: Kể từ PHP 7.4, phương pháp này cho phép bạn tùy chỉnh dữ liệu tuần tự hóa bằng cách trả về một mảng biểu diễn dạng tuần tự hóa của đối tượng.
 
  - `__unserialize`: Phần tương ứng này __serialize()cho phép tùy chỉnh việc khôi phục một đối tượng từ dữ liệu tuần tự của nó.
 
## Python

  - Python sử dụng một mô-đun có tên là `Pickle` để tuần tự hóa và hủy tuần tự hóa các đối tượng. Mô-đun này chuyển đổi một đối tượng Python thành một luồng byte (và ngược lại), cho phép lưu nó vào một tệp hoặc truyền qua mạng. Pickling là một công cụ mạnh mẽ cho các nhà phát triển Python vì nó xử lý hầu hết mọi loại đối tượng Python mà không cần bất kỳ thao tác thủ công nào đối với trạng thái của đối tượng.

## Note

- Java: `Serializable` interface

- .NET: `System.Text.Json` for JSON và `System.Xml.Serialization` for XML

- Ruby: `Marshal`

- Kiểm tra Cookie

  - Cookie thường được sử dụng để lưu trữ dữ liệu tuần tự trong các ứng dụng web. Bằng cách kiểm tra nội dung của cookie, người ta thường có thể suy ra:

    - Giá trị được mã hóa Base64 trong cookie ( PHP và .NET) : Nếu cookie chứa dữ liệu trông giống như được mã hóa base64, giải mã nó có thể tiết lộ các đối tượng hoặc cấu trúc dữ liệu được tuần tự hóa. PHP thường sử dụng tuần tự hóa để quản lý phiên và lưu trữ các biến phiên theo định dạng tuần tự hóa.

    - Trạng thái xem ASP.NET : Các ứng dụng .NET có thể sử dụng tuần tự hóa trong trạng thái xem được gửi đến trình duyệt của máy khách. __VIEWSTATEĐôi khi có thể nhìn thấy một trường có tên , được mã hóa base64. Giải mã và kiểm tra nó có thể tiết lộ liệu nó có chứa dữ liệu tuần tự hóa có thể bị khai thác hay không.


# Exploitation - Update Properties

![image](https://github.com/user-attachments/assets/047d3003-44ae-4a48-a7e4-1684af603aef)

![image](https://github.com/user-attachments/assets/f7d3c00a-e486-46a1-8da2-d8b1812ac875)

![image](https://github.com/user-attachments/assets/71bb57fe-ef82-4e3c-bff8-22c8fefa5632)

![image](https://github.com/user-attachments/assets/32180c57-d855-47dd-9411-bea7437af266)

# Exploitation - Object Injection

- Object injection là một lỗ hổng phát sinh từ việc giải tuần tự hóa dữ liệu không an toàn trong các ứng dụng web. Nó xảy ra khi dữ liệu không đáng tin cậy được giải tuần tự hóa thành một đối tượng, cho phép kẻ tấn công thao túng dữ liệu đã tuần tự hóa để thực thi mã tùy ý, dẫn đến rủi ro bảo mật nghiêm trọng.

![image](https://github.com/user-attachments/assets/57f1a01b-4d0b-49bc-a02d-bf9d9cf69e53)

![image](https://github.com/user-attachments/assets/30835dd5-9e4b-407b-aa18-63d306509362)

![image](https://github.com/user-attachments/assets/878d4123-4a6f-490d-821c-cb24a52f6408)

- flag: `THM{GOT_THE_SH#LL}`

# Automation Scripts
